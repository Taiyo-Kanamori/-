<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>サンプルページ</title>
    <script src="kanamori.js" defer></script>
    <link rel="stylesheet" href="kanamori.css" />
  </head>

  <body>
    <header>
      <h1>のこり時間</h1>
      <h1 id="dif-time"></h1>
      現在時刻　<span id="current-time"></span><br />
      設定時間<input type="time" id="set-time" />
      <button onclick="differencetime()">決定</button>
      <p id="dif-time"></p>

      <script>
        function updateTime() {
          //現在時刻表示
          const now = new Date();
          const hours = String(now.getHours()).padStart(2, '0');
          const minutes = String(now.getMinutes()).padStart(2, '0');
          const seconds = String(now.getSeconds()).padStart(2, '0');
          document.getElementById(
            'current-time'
          ).textContent = `${hours}:${minutes}:${seconds}`;
        }
        updateTime();
        setInterval(updateTime, 1000);

        function differencetime() {
          //残り時間の計算、表示
          let now = new Date();
          let hours = now.getHours();
          let minutes = now.getMinutes();
          let seconds = now.getSeconds();
          let settime = document.getElementById('set-time').value;
          let [sethours, setminutes] = settime.split(':').map(Number);
          let settotalseconds = sethours * 3600 + setminutes * 60;
          let totalseconds = hours * 3600 + minutes * 60 + seconds;
          let difseconds = settotalseconds - totalseconds;
          if (difseconds < 0) {
            difseconds += 24 * 3600;
          }
          let difhours = Math.floor(difseconds / 3600);
          difseconds %= 3600;
          let difminutes = Math.floor(difseconds / 60);
          difseconds %= 60;
          difhours = String(difhours).padStart(2, '0');
          difminutes = String(difminutes).padStart(2, '0');
          difseconds = String(difseconds).padStart(2, '0');
          document.getElementById(
            'dif-time'
          ).textContent = `${difhours}:${difminutes}:${difseconds}`;
        }
        setInterval(differencetime, 1000);
      </script>
    </header>

    <!--<aside id="left">
      <p>左カラム</p>
    </aside>-
    <main>
      <button id="kiroku-button">記録</button>
      <p>アチーブメント</p>
    </main>
    <aside id="right">
      <p>ランキング</p>
    </aside>
    <!--<footer>
      <p>フッター</p>
    </footer>-->
  </body>
</html>
